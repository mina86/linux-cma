\Section{Implementation}{How does CMA work?}

\subsection{Page allocator quick overview}

\begin{frame}[fragile]
  \frametitle{Pages and page blocks}

  \begin{itemize}
  \item Linux manages memory in units of pages.
    \begin{itemize}
    \item Typically \unit[4]{KiB} in size.
    \end{itemize}
  \item Page allocator uses buddy allocation algorithm.
  \item Page can have order ranging from 0 to 10.\footnote{Strictly
    speaking, from zero to one less than \lstinline|MAX_ORDER| which is
    usually 11.}
    \begin{itemize}
    \item 10-order page is called max-order page.
    \end{itemize}
  \item Pages are grouped into page blocks.
  \item Page block consists of 1024 pages, same size as max-order
    page.\footnote{This actually depends, but it's the case for ARM
      and x86.}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Migrate types}

  \begin{itemize}
  \item Each free page and page block has a~migration type assigned to
    it.
  \item It does not change any properties of the page.
  \item Users request given page with migrate type.
  \item Page allocator tries to fulfil the requirements from give
    type.
  \item If there are no free pages with given type, fallbacks are used.
  \item For our purpose, let's say there are two possible types:
    \begin{description}[unmovable]
    \item[unmovable] Page cannot be migrated.
    \item[movable]   Page can be migrated.
    \end{description}
  \end{itemize}
\end{frame}
